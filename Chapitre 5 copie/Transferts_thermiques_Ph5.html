<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THERMOHUB - Terminale Sp√©cialit√© Ph5</title>
    <!-- MathJax pour les formules LaTeX -->
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        :root {
            /* Palette Apple Liquid Glass */
            --bg-light: #f5f5f7;
            --bg-dark: #000000;
            --accent: #0071e3;
            --accent-soft: rgba(0, 113, 227, 0.12);
            --glass-bg: rgba(255, 255, 255, 0.75);
            --glass-border: rgba(255, 255, 255, 0.4);
            --text-main: #1d1d1f;
            --text-secondary: #6e6e73;
            
            /* Couleurs S√©mantiques */
            --color-def: #0071e3;   /* Bleu : D√©finitions */
            --color-var: #af52de;   /* Violet : Variables */
            --color-unit: #34c759;  /* Vert : Unit√©s SI */
            --color-trap: #ff9500;  /* Orange : Vigilance */
            --color-danger: #ff3b30;/* Rouge : Chaleur / Sens physique */
            
            --card-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            --blur: 30px;
        }

        [data-theme="dark"] {
            --bg-light: #000000;
            --glass-bg: rgba(28, 28, 30, 0.85);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-main: #f5f5f7;
            --text-secondary: #a1a1a6;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-font-smoothing: antialiased; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", system-ui, sans-serif;
            background-color: var(--bg-light);
            color: var(--text-main);
            line-height: 2.0; /* Interlignage a√©r√© demand√© */
            overflow-x: hidden;
            transition: background 0.6s ease;
        }

        /* --- BACKGROUND --- */
        .bg-blobs {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; overflow: hidden; filter: blur(100px);
        }
        .blob {
            position: absolute; border-radius: 50%; opacity: 0.4;
            animation: move 25s infinite alternate;
        }
        .blob-1 { width: 600px; height: 600px; background: var(--accent); top: -150px; right: -150px; }
        .blob-2 { width: 500px; height: 500px; background: #5e5ce6; bottom: -50px; left: -150px; }
        @keyframes move { from { transform: translate(0,0); } to { transform: translate(60px, 30px); } }

        /* --- NAVIGATION --- */
        nav {
            position: sticky; top: 0; z-index: 1000;
            height: 80px; background: var(--glass-bg);
            backdrop-filter: blur(var(--blur)) saturate(180%);
            border-bottom: 1px solid var(--glass-border);
            display: flex; align-items: center; justify-content: space-between; padding: 0 5%;
        }
        .logo { font-weight: 800; font-size: 24px; letter-spacing: -1px; }
        .logo span { color: var(--accent); }
        .nav-actions { display: flex; gap: 12px; }

        /* --- BOUTONS --- */
        .btn-apple {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            padding: 10px 22px;
            border-radius: 14px;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-main);
            cursor: pointer;
            backdrop-filter: blur(10px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex; align-items: center; gap: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }
        .btn-apple:hover {
            transform: translateY(-2px);
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        /* --- DASHBOARD --- */
        .dashboard {
            max-width: 1200px; margin: 40px auto 100px;
            display: grid; grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
            gap: 30px; padding: 0 20px;
            transition: 0.6s ease;
        }
        .dashboard.hidden { transform: scale(0.95); opacity: 0; pointer-events: none; position: absolute; }

        .module-tile {
            background: var(--glass-bg); backdrop-filter: blur(var(--blur));
            border: 1px solid var(--glass-border); border-radius: 35px;
            padding: 40px; cursor: pointer;
            transition: all 0.4s cubic-bezier(0.15, 1, 0.3, 1);
            box-shadow: var(--card-shadow); display: flex; flex-direction: column; min-height: 280px;
        }
        .module-tile:hover { transform: translateY(-12px); border-color: var(--accent); }
        .module-tile .icon { font-size: 45px; margin-bottom: 25px; }
        .module-tile h3 { font-size: 26px; margin-bottom: 15px; font-weight: 800; }

        /* --- PAGES DE CONTENU --- */
        .content-page {
            position: fixed; top: 80px; left: 0; width: 100%; height: calc(100vh - 80px);
            background: var(--bg-light); z-index: 500; overflow-y: auto;
            padding: 60px 20px; display: none; opacity: 0;
            transform: translateY(40px); transition: all 0.7s cubic-bezier(0.15, 1, 0.3, 1);
        }
        .content-page.active { display: block; opacity: 1; transform: translateY(0); }

        .page-container {
            max-width: 1100px; margin: 0 auto 150px;
            background: var(--glass-bg); backdrop-filter: blur(var(--blur));
            border: 1px solid var(--glass-border); border-radius: 45px;
            padding: 60px; box-shadow: var(--card-shadow);
        }

        .back-btn {
            display: inline-flex; align-items: center; color: var(--accent);
            font-weight: 800; margin-bottom: 50px; cursor: pointer; transition: 0.3s;
            background: var(--accent-soft); padding: 12px 24px; border-radius: 16px;
        }

        /* --- VISIONNEUSE PAGE PAR PAGE (PROPORTIONS FIX√âES) --- */
        .viewer-container {
            width: 100%;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Cadre Portrait pour le cours */
        .frame-portrait {
            width: 100%;
            max-width: 650px; /* Largeur A4-ish */
            aspect-ratio: 1 / 1.41; /* Ratio A4 */
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--glass-border);
        }

        /* Cadre Paysage pour la pr√©sentation */
        .frame-landscape {
            width: 100%;
            max-width: 950px; /* Largeur √©cran 16:9 */
            aspect-ratio: 1.77 / 1; /* Ratio 16:9 */
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--glass-border);
        }

        iframe { width: 100%; height: 100%; border: none; overflow: hidden; }

        .viewer-controls {
            display: flex; justify-content: center; align-items: center; gap: 30px;
            margin-top: 30px; background: var(--glass-bg); padding: 15px 40px;
            border-radius: 25px; backdrop-filter: blur(10px); border: 1px solid var(--glass-border);
        }

        .page-info { font-weight: 700; color: var(--accent); font-size: 18px; min-width: 120px; text-align: center; }

        /* --- TEXTE --- */
        h1 { font-size: 52px; font-weight: 900; margin-bottom: 40px; letter-spacing: -2px; }
        h2 { color: var(--color-def); margin-top: 40px; font-size: 32px; border-left: 6px solid var(--accent); padding-left: 20px; }
        .c-def { color: var(--color-def); font-weight: 700; }
        .c-var { color: var(--color-var); font-weight: 700; }
        .c-unit { color: var(--color-unit); font-weight: 600; font-family: monospace; }
        .c-trap { color: var(--color-trap); font-weight: 800; }
        .c-danger { color: var(--color-danger); font-weight: 800; }

        .formula-card {
            background: var(--accent-soft); border-radius: 30px;
            padding: 40px; margin: 40px 0; text-align: center;
            border: 1px solid rgba(0, 113, 227, 0.1);
        }
        .formula-math { font-size: 2.5em; display: block; color: var(--text-main); margin-bottom: 10px; }

        #progress { position: fixed; top: 80px; left: 0; height: 5px; background: var(--accent); width: 0%; z-index: 1001; }
    </style>
</head>
<body>

    <div id="progress"></div>
    <div class="bg-blobs"><div class="blob blob-1"></div><div class="blob blob-2"></div></div>

    <nav>
        <div class="logo">THERMO<span>HUB</span></div>
        <div class="nav-actions">
            <button class="btn-apple" onclick="toggleTheme()">üåì Th√®me</button>
            <button id="revBtn" class="btn-apple" onclick="toggleRevisionMode()">üëÅÔ∏è R√©vision</button>
        </div>
    </nav>

    <!-- BARRE D'OUTILS -->
    <div style="max-width: 1200px; margin: 30px auto; padding: 0 20px; display: grid; grid-template-columns: repeat(auto-fit, minmax(170px, 1fr)); gap: 15px;">
        <button class="btn-apple" onclick="initViewer('pdf', 6)">üìÑ PDF du cours</button>
        <button class="btn-apple" onclick="openPage('p-video')">üé¨ Vid√©o Ph5</button>
        <button class="btn-apple" onclick="openPage('p-audio')">üéß Podcast</button>
        <button class="btn-apple" onclick="openPage('p-quiz')">üß© Quiz Flash</button>
        <button class="btn-apple" onclick="openPage('p-info')">üñºÔ∏è Infographie</button>
        <button class="btn-apple" onclick="initViewer('pres', 15)">üìä Pr√©sentation</button>
    </div>

    <!-- DASHBOARD -->
    <div class="dashboard" id="mainDashboard">
        <div class="module-tile" onclick="openPage('p1')">
            <div class="icon">üå°Ô∏è</div>
            <h3>1. Notions & Pression</h3>
            <p>D√©finir un <span class="c-def">syst√®me</span>, la <span class="c-var">Pression P</span> et l'agitation microscopique.</p>
        </div>
        <div class="module-tile" onclick="openPage('p2')">
            <div class="icon">üéà</div>
            <h3>2. Gaz Parfait</h3>
            <p>L'√©quation fondamentale <span class="c-var">PV = nRT</span> et le lien macro ‚Üî micro.</p>
        </div>
        <div class="module-tile" onclick="openPage('p3')">
            <div class="icon">‚öñÔ∏è</div>
            <h3>3. Premier Principe</h3>
            <p>Variation d'√©nergie interne <span class="c-var">ŒîU = W + Q</span> et syst√®mes incompressibles.</p>
        </div>
        <div class="module-tile" onclick="openPage('p4')">
            <div class="icon">üîÑ</div>
            <h3>4. Flux & Transferts</h3>
            <p>√âtude des modes : conduction, convection et rayonnement.</p>
        </div>
        <div class="module-tile" onclick="openPage('p5')">
            <div class="icon">üåç</div>
            <h3>5. Bilan Radiatif</h3>
            <p>L'√©quilibre de la Terre : <span class="c-def">Alb√©do</span> et <span class="c-trap">Effet de Serre</span>.</p>
        </div>
        <div class="module-tile" onclick="openPage('p6')">
            <div class="icon">üìâ</div>
            <h3>6. Loi de Newton</h3>
            <p>Calculer la vitesse du refroidissement et le <span class="c-var">temps caract√©ristique œÑ</span>.</p>
        </div>
    </div>

    <!-- VISIONNEUSE UNIQUE (DYNAMIQUE) -->
    <div id="p-viewer" class="content-page">
        <div class="page-container">
            <div class="back-btn" onclick="closePage()">‚Üê Retour au menu</div>
            <h1 id="viewerTitle">Document</h1>
            <div class="viewer-container">
                <div id="viewerFrameContainer" class="frame-portrait">
                    <iframe id="viewerFrame" src=""></iframe>
                </div>
                <div class="viewer-controls">
                    <button class="btn-apple" onclick="changePage(-1)">‚óÄ Pr√©c√©dent</button>
                    <span class="page-info" id="pageDisplay">Page 1 / --</span>
                    <button class="btn-apple" onclick="changePage(1)">Suivant ‚ñ∂</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODULE 1 : NOTIONS -->
    <div id="p1" class="content-page">
        <div class="page-container">
            <div class="back-btn" onclick="closePage()">‚Üê Retour</div>
            <h1>1. Notions de Base</h1>
            <p>La <span class="c-def">thermodynamique</span> √©tudie les syst√®mes contenant un grand nombre d'entit√©s (atomes, ions, mol√©cules).</p>
            <h2>Variables d'√âtat</h2>
            <p>L'√©tat d'un syst√®me est caract√©ris√© par des grandeurs macroscopiques :</p>
            <ul>
                <li><span class="c-var">Masse volumique œÅ</span> : en <span class="c-unit">kg¬∑m‚Åª¬≥</span>.</li>
                <li><span class="c-var">Temp√©rature T</span> : en <span class="c-unit">Kelvin (K)</span>.</li>
                <li><span class="c-var">Pression P</span> : en <span class="c-unit">Pascal (Pa)</span>.</li>
            </ul>
            <div class="formula-card">
                <span class="formula-math">\( P = \frac{F}{S} \)</span>
                <p><span class="c-var">P</span> pression (Pa) | <span class="c-var">F</span> force pressante (N) | <span class="c-var">S</span> surface (m¬≤)</p>
            </div>
            <p><span class="c-trap">‚ö†Ô∏è Conversion :</span> Pour les Kelvins : \( T(K) = \theta(^\circ C) + 273,15 \).</p>
        </div>
    </div>

    <!-- MODULE 2 : GAZ PARFAIT -->
    <div id="p2" class="content-page">
        <div class="page-container">
            <div class="back-btn" onclick="closePage()">‚Üê Retour</div>
            <h1>2. Le Mod√®le du Gaz Parfait</h1>
            <p>Le mod√®le suppose que les mol√©cules sont des points mat√©riels <span class="c-def">sans interactions</span> mutuelles.</p>
            <div class="formula-card">
                <span class="formula-math">\( P \cdot V = n \cdot R \cdot T \)</span>
                <p>Constante <span class="c-var">R</span> = <span class="c-unit">8,314 J¬∑mol‚Åª¬π¬∑K‚Åª¬π</span></p>
            </div>
            <p><span class="c-trap">‚ö†Ô∏è Unit√©s :</span> Le volume <span class="c-var">V</span> doit √™tre en <span class="c-unit">m√®tres cubes (m¬≥)</span>. Rappel : <span class="c-unit">1 L = 10‚Åª¬≥ m¬≥</span>.</p>
        </div>
    </div>

    <!-- MODULE 3 : PREMIER PRINCIPE -->
    <div id="p3" class="content-page">
        <div class="page-container">
            <div class="back-btn" onclick="closePage()">‚Üê Retour</div>
            <h1>3. Premier Principe</h1>
            <p>Le premier principe traduit la <span class="c-def">conservation de l'√©nergie</span>.</p>
            <div class="formula-card">
                <span class="formula-math">\( \Delta U = W + Q \)</span>
                <p>Variation d'√©nergie interne = Travail + Transfert thermique</p>
            </div>
            <p><span class="c-danger">Convention :</span> L'√©nergie re√ßue par le syst√®me est <span class="c-def">positive (+)</span>. L'√©nergie c√©d√©e est <span class="c-danger">n√©gative (-)</span>.</p>
        </div>
    </div>

    <!-- LES PAGES 4, 5 ET 6 SONT D√âJ√Ä INCLUSES AVEC LEUR CONTENU -->
    <div id="p4" class="content-page"><div class="page-container"><div class="back-btn" onclick="closePage()">‚Üê Retour</div><h1>4. Transferts Thermiques</h1><div class="formula-card"><span class="formula-math">\( \phi = \frac{Q}{\Delta t} = \frac{\Delta T}{R_{th}} \)</span></div><p>Unit√© du flux : <span class="c-unit">Watt (W)</span>. Sens : du <span class="c-danger">Chaud</span> vers le <span class="c-def">Froid</span>.</p></div></div>
    <div id="p5" class="content-page"><div class="page-container"><div class="back-btn" onclick="closePage()">‚Üê Retour</div><h1>5. Bilan Radiatif</h1><div class="formula-card"><span class="formula-math">\( \phi = \sigma \cdot S \cdot T^4 \)</span></div><p>Equilibre de la Terre : <span class="c-def">Alb√©do</span> (30%) et <span class="c-trap">Effet de Serre</span> (+15¬∞C).</p></div></div>
    <div id="p6" class="content-page"><div class="page-container"><div class="back-btn" onclick="closePage()">‚Üê Retour</div><h1>6. Loi de Newton</h1><div class="formula-card"><span class="formula-math">\( T(t) = T_e + (T_0 - T_e) \cdot e^{-t/\tau} \)</span></div><p>Temps caract√©ristique : <span class="c-var">œÑ = mc / hS</span>.</p></div></div>

    <!-- PAGES MULTIMEDIA -->
    <div id="p-video" class="content-page"><div class="page-container"><div class="back-btn" onclick="closePage()">‚Üê Retour</div><h1>Vid√©o de Cours</h1><video controls style="width:100%; border-radius:20px; box-shadow:var(--card-shadow);"><source src="Transferts_thermiques_Ph5.mp4" type="video/mp4"></video></div></div>
    <div id="p-audio" class="content-page"><div class="page-container"><div class="back-btn" onclick="closePage()">‚Üê Retour</div><h1>Podcast R√©vision</h1><audio controls style="width:100%; margin-top:20px;"><source src="Transferts_thermiques_Ph5_podcast.m4a"></audio></div></div>
    <div id="p-info" class="content-page"><div class="page-container"><div class="back-btn" onclick="closePage()">‚Üê Retour</div><h1>Infographie</h1><img src="Transferts_thermiques_Ph5_infographie.png" style="width:100%; border-radius:30px;"></div></div>
    <div id="p-quiz" class="content-page"><div class="page-container"><div class="back-btn" onclick="closePage()">‚Üê Retour</div><h1>Flashcards Quizz</h1><div id="quiz-root"></div><div style="text-align:center; margin-top:40px;"><button class="btn-apple" style="margin:0 auto;" onclick="loadNextCard()">Suivant</button></div></div></div>

    <script>
        // --- GESTION DES DOCUMENTS ---
        let currentMode = ""; // "pdf" ou "pres"
        let currentPage = 1;
        let totalPages = 0;

        function initViewer(type, pages) {
            currentMode = type;
            currentPage = 1;
            totalPages = pages;
            
            const container = document.getElementById('viewerFrameContainer');
            if(type === 'pdf') {
                container.className = 'frame-portrait';
                document.getElementById('viewerTitle').innerText = "Document de Cours (PDF)";
            } else {
                container.className = 'frame-landscape';
                document.getElementById('viewerTitle').innerText = "Pr√©sentation du Chapitre";
            }
            
            updateFrame();
            openPage('p-viewer');
        }

        function changePage(delta) {
            let next = currentPage + delta;
            if (next >= 1 && next <= totalPages) {
                currentPage = next;
                updateFrame();
            }
        }

        function updateFrame() {
            const frame = document.getElementById('viewerFrame');
            const display = document.getElementById('pageDisplay');
            
            let path = "";
            if(currentMode === "pdf") {
                path = `cours/Transferts_thermiques_Ph5_cours_page${currentPage}.pdf`;
            } else {
                path = `Presentation/Transferts_thermiques_Ph5_presentation_page${currentPage}.pdf`;
            }
            
            // On force le rechargement de l'iframe
            frame.src = path + "#toolbar=0&navpanes=0&scrollbar=0";
            display.innerText = `Page ${currentPage} / ${totalPages}`;
        }

        // --- NAVIGATION DES PAGES ---
        function openPage(id) {
            document.getElementById('mainDashboard').classList.add('hidden');
            const pages = document.querySelectorAll('.content-page');
            pages.forEach(p => p.classList.remove('active'));
            const target = document.getElementById(id);
            target.style.display = 'block';
            setTimeout(() => { target.classList.add('active'); MathJax.typeset(); }, 50);
            if(id === 'p-quiz') loadNextCard();
            window.scrollTo(0, 0);
        }

        function closePage() {
            const activePage = document.querySelector('.content-page.active');
            if (activePage) {
                const video = activePage.querySelector('video');
                if(video) video.pause();
                activePage.classList.remove('active');
                setTimeout(() => {
                    activePage.style.display = 'none';
                    document.getElementById('mainDashboard').classList.remove('hidden');
                    document.getElementById('viewerFrame').src = "";
                }, 500);
            }
        }

        // --- THEME & REVISION ---
        function toggleTheme() {
            const b = document.body;
            b.setAttribute('data-theme', b.getAttribute('data-theme') === 'dark' ? 'light' : 'dark');
        }

        let revMode = false;
        function toggleRevisionMode() {
            revMode = !revMode;
            document.querySelectorAll('.formula-math').forEach(f => {
                f.style.filter = revMode ? 'blur(10px)' : 'none';
                f.style.transition = 'filter 0.4s ease';
                f.onclick = function() { this.style.filter = 'none'; };
            });
            document.getElementById('revBtn').innerText = revMode ? "Normal" : "R√©vision";
        }

        // --- QUIZ DATA ---
        const quizData = [
            {q: "√âquation d'√©tat du gaz parfait ?", a: "PV = nRT"},
            {q: "Unit√© de la r√©sistance thermique ?", a: "K¬∑W‚Åª¬π"},
            {q: "Expression du premier principe ?", a: "ŒîU = W + Q"},
            {q: "Valeur de la constante R ?", a: "8,314 J¬∑mol‚Åª¬π¬∑K‚Åª¬π"}
        ];
        let qIdx = 0;
        function loadNextCard() {
            const root = document.getElementById('quiz-root');
            const data = quizData[qIdx % quizData.length];
            root.innerHTML = `<div class="card-stack" onclick="this.querySelector('.card').classList.toggle('flipped')"><div class="card"><div class="card-front">${data.q}</div><div class="card-back">${data.a}</div></div></div>`;
            qIdx++;
        }

        window.onscroll = () => {
            let winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            let height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            document.getElementById("progress").style.width = (winScroll / height) * 100 + "%";
        };
    </script>
</body>
</html>